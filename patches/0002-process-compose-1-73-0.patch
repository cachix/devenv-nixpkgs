From 687ef8a6ffadebc51caee5d5bb02a80b269fec98 Mon Sep 17 00:00:00 2001
From: misilelab <misileminecord@gmail.com>
Date: Tue, 12 Aug 2025 00:33:44 +0900
Subject: [PATCH] process-compose: 1.64.1 -> 1.73.0

https://github.com/F1bonacc1/process-compose/releases/tag/v1.73.0

Signed-off-by: misilelab <misileminecord@gmail.com>
Co-authored-by: sandydoo <hey@sandydoo.me>
---
 pkgs/by-name/pr/process-compose/package.nix | 17 ++++-------------
 1 file changed, 4 insertions(+), 13 deletions(-)

diff --git a/pkgs/by-name/pr/process-compose/package.nix b/pkgs/by-name/pr/process-compose/package.nix
index 00d8baa134bf..50e030c85919 100644
--- a/pkgs/by-name/pr/process-compose/package.nix
+++ b/pkgs/by-name/pr/process-compose/package.nix
@@ -2,7 +2,6 @@
   lib,
   buildGoModule,
   fetchFromGitHub,
-  fetchpatch2,
   installShellFiles,
 }:
 
@@ -11,13 +10,13 @@ let
 in
 buildGoModule rec {
   pname = "process-compose";
-  version = "1.64.1";
+  version = "1.73.0";
 
   src = fetchFromGitHub {
     owner = "F1bonacc1";
     repo = "process-compose";
     tag = "v${version}";
-    hash = "sha256-qv/fVfuQD7Nan5Nn1RkwXoGZuPYSRWQaojEn6MCF9BQ=";
+    hash = "sha256-oqScez+Ms01/TyGo3HmhtEgofIbpLqQtEyQH6kxVGrw=";
     # populate values that require us to use git. By doing this in postFetch we
     # can delete .git afterwards and maintain better reproducibility of the src.
     leaveDotGit = true;
@@ -30,15 +29,6 @@ buildGoModule rec {
     '';
   };
 
-  patches = [
-    # Fix a linker issue with dlopen on x86_64-darwin
-    # https://github.com/f1bonacc1/process-compose/pull/342
-    (fetchpatch2 {
-      url = "https://github.com/F1bonacc1/process-compose/commit/af82749c5dacaa20f2c3b07ca4e081d1b38e40c4.patch";
-      hash = "sha256-5Hgvwn2GEp/lINPefxXdJUGb2TJfufqAPm+/3gdi6XY=";
-    })
-  ];
-
   # ldflags based on metadata from git and source
   preBuild = ''
     ldflags+=" -X ${config-module}.Commit=$(cat COMMIT)"
@@ -55,7 +45,8 @@ buildGoModule rec {
     installShellFiles
   ];
 
-  vendorHash = "sha256-qkfJo+QGqcqiZMLuWbj0CpgRWxbqTu6DGAW8pBu4O/0=";
+  vendorHash = "sha256-YfTDEdKHqw1e7JXv5gxo7OgNMhriaZo5+cnpzfbtfLk=";
+  proxyVendor = true;
 
   doCheck = false;
 
-- 
2.50.1

